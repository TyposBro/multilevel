# {PATH_TO_PROJECT}/api/Dockerfile.dev

# Use a full base image for development, as it has more build tools if needed.
# 'slim' is fine, but the full image can be easier to debug.
FROM node:22-bookworm

# Set the working directory in the container
WORKDIR /app 
# Changed from /usr/src/app to /app for simplicity. Make sure to use /app in docker-compose.yaml.

# --- Application Dependencies ---
# Copy package.json and package-lock.json first to leverage Docker's build cache.
COPY package*.json ./

# Install ALL dependencies, including devDependencies like nodemon.
# Use 'npm install' instead of 'npm ci' for development.
RUN npm install

# --- Application Code ---
# This step is less critical with volumes, but good practice to have the code in the base image.
COPY . .

# --- Expose Port ---
# This is documentation. The actual port mapping is in docker-compose.
EXPOSE 3000

# The default command will be overridden by docker-compose, so we don't need a CMD here.
# Or, you could set a default dev command:
# CMD ["npm", "run", "dev"]